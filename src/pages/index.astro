---
import WeeklyPost from "../components/weekly-post.astro";
import { getCollection, getEntry } from "astro:content";
import "../styles/global.css";
import MainLayout from "../layouts/MainLayout.astro";
import Pagination from "../components/pagination.astro";

const allNewsletter = await getCollection("newsletter");
const sortedNewsletter = allNewsletter.sort(
	(a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime(),
);
const latestNewsletter = sortedNewsletter[0];
const pageTitle = `Week #${sortedNewsletter.length}`;
const contentData = latestNewsletter.data;
const pageDate = new Date(contentData.date).toLocaleDateString("en-US", {
	year: "numeric",
	month: "long",
	day: "numeric",
});
const prevURL =
	sortedNewsletter.length > 1 && sortedNewsletter.at(-1)
		? `/week/${sortedNewsletter.length - 1}`
		: null;
---

<MainLayout>
	<!-- <WeeklyPost
		pageTitle={pageTitle}
		contentData={contentData}
		pageDate={pageDate}
	/> -->
	{prevURL && <Pagination nextURL={null} prevURL={prevURL} />}
</MainLayout>
